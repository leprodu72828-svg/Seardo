<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Seardo Pro</title>
<style>
:root{
  --bg:#0f2d0f;
  --panel:#163816;
  --accent:#32cd32;
  --text:#e6ffe6;
}

* { box-sizing:border-box; margin:0; padding:0; font-family:Arial,sans-serif; }

body { background:var(--bg); color:var(--text); }

.container{
  max-width:480px;
  margin:60px auto;
  background:var(--panel);
  padding:30px;
  border-radius:16px;
  border:2px solid var(--accent);
  box-shadow:0 0 30px #000;
}

h1,h2,h3 { text-align:center; margin-bottom:15px; }

input,button{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:8px;
  border:none;
  font-size:16px;
}

input { background:#0f2d0f; color:var(--text); border:1px solid var(--accent); }

button{
  background:var(--accent);
  color:#000;
  font-weight:bold;
  cursor:pointer;
  transition:0.3s;
}

button:hover { background:#28a428; }

.hidden { display:none; }

header { text-align:center; padding:20px; }

.filters label { margin:0 10px; }

.results{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(250px,1fr));
  gap:15px;
  padding:20px;
}

.card{
  border:1px solid var(--accent);
  border-radius:10px;
  padding:15px;
  background:#1b3a1b;
}

a { color:var(--accent); text-decoration:none; }
a:hover { text-decoration:underline; }

.admin-panel { border:2px solid red; margin-top:20px; padding:15px; border-radius:10px; background:#002200; }
</style>
</head>
<body>

<!-- AUTH -->
<div class="container" id="auth">
  <h1>Seardo Pro</h1>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="register()">Create Account</button>
  <button onclick="login()">Login</button>
</div>

<!-- APP -->
<div id="app" class="hidden">
<header>
  <h1>üîç Seardo Search</h1>
  <input id="query" placeholder="Search anything...">
  <br><br>
  <button onclick="search()">Search</button>
  <p id="role"></p>
  <button onclick="logout()">Logout</button>
</header>

<div class="filters">
  <label><input type="checkbox" id="wiki" checked> Wiki</label>
  <label><input type="checkbox" id="news" checked> News</label>
  <label><input type="checkbox" id="movies" checked> Movies</label>
  <label><input type="checkbox" id="music" checked> Music</label>
  <label><input type="checkbox" id="books" checked> Books</label>
</div>

<div class="results" id="results"></div>

<div id="adminPanel" class="admin-panel hidden">
  <h2>Admin Panel</h2>
  <p>Total Users: <span id="userCount"></span></p>
  <p>Toggle filters to enable/disable APIs.</p>
</div>

</div>

<script>
/* ===== USERS ===== */
function getUsers(){ return JSON.parse(localStorage.getItem("users")||"[]"); }
function saveUsers(u){ localStorage.setItem("users",JSON.stringify(u)); }

/* ===== AUTH ===== */
function register(){
  const e=document.getElementById("email").value.trim();
  const p=document.getElementById("password").value.trim();
  if(!e||!p){ alert("Fill all fields"); return; }

  let u=getUsers();
  if(u.find(x=>x.email===e)){ alert("Account already exists"); return; }

  const role = u.length===0 ? "admin" : "user";
  u.push({email:e,password:p,role});
  saveUsers(u);
  alert("Account created ("+role+")");
  email.value=""; password.value="";
}

function login(){
  const e=document.getElementById("email").value.trim();
  const p=document.getElementById("password").value.trim();
  const u=getUsers().find(x=>x.email===e && x.password===p);
  if(!u){ alert("Invalid login"); return; }

  localStorage.setItem("session",JSON.stringify(u));
  loadApp();
}

function logout(){ localStorage.removeItem("session"); location.reload(); }

function loadApp(){
  const s=JSON.parse(localStorage.getItem("session"));
  if(!s) return;

  auth.classList.add("hidden");
  app.classList.remove("hidden");
  role.textContent="Role: "+s.role.toUpperCase();

  if(s.role==="admin"){
    adminPanel.classList.remove("hidden");
    userCount.textContent=getUsers().length;
  }
}

loadApp();

/* ===== SEARCH ===== */
const results=document.getElementById("results");

function card(title,content,link){
  return `<div class="card"><h3>${title}</h3><p>${content||""}</p>${link?`<a href="${link}" target="_blank">Open</a>`:""}</div>`;
}

async function search(){
  results.innerHTML="";
  const q=query.value.trim();
  if(!q) return;

  if(wiki.checked){
    try{
      const r=await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${q}`);
      if(r.ok){ const d=await r.json(); results.innerHTML+=card("Wikipedia",d.extract,d.content_urls?.desktop?.page); }
    }catch{}
  }

  if(news.checked){
    try{
      const r=await fetch(`https://hn.algolia.com/api/v1/search?query=${q}`);
      const d=await r.json();
      d.hits.slice(0,3).forEach(n=>results.innerHTML+=card("News",n.title,n.url));
    }catch{}
  }

  if(movies.checked){
    try{
      const r=await fetch(`https://api.tvmaze.com/search/shows?q=${q}`);
      const d=await r.json();
      d.slice(0,3).forEach(m=>results.innerHTML+=card("Movie",m.show.name,m.show.summary?.replace(/<[^>]+>/g,""),m.show.url));
    }catch{}
  }

  if(music.checked){
    try{
      const r=await fetch(`https://itunes.apple.com/search?term=${q}&limit=3`);
      const d=await r.json();
      d.results.forEach(m=>results.innerHTML+=card("Music",m.trackName,m.trackViewUrl));
    }catch{}
  }

  if(books.checked){
    try{
      const r=await fetch(`https://openlibrary.org/search.json?q=${q}`);
      const d=await r.json();
      d.docs.slice(0,3).forEach(b=>results.innerHTML+=card("Book",b.title,`Author: ${b.author_name?.[0]||""}`,`https://openlibrary.org${b.key}`));
    }catch{}
  }
}
</script>

</body>
</html>
